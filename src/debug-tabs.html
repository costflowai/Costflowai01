<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Calculator Tabs</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .tab-btn { padding: 10px 20px; margin: 5px; border: 1px solid #ccc; background: #f5f5f5; cursor: pointer; }
        .tab-btn.active { background: #007cba; color: white; }
        .calculator-panel { display: none; padding: 20px; border: 1px solid #ccc; margin-top: 10px; }
        .calculator-panel.active { display: block; }
    </style>
</head>
<body>
    <h1>Tab Debugging Test</h1>
    
    <div id="calc-tabs" role="tablist">
        <button role="tab" class="tab-btn active" data-tab="concrete">Concrete</button>
        <button role="tab" class="tab-btn" data-tab="framing">Framing</button>
        <button role="tab" class="tab-btn" data-tab="paint">Paint</button>
    </div>
    
    <div id="concrete-calc" class="calculator-panel active" role="tabpanel">
        <h2>Concrete Calculator</h2>
        <p>Concrete calculator content here...</p>
    </div>
    
    <div id="framing-calc" class="calculator-panel" role="tabpanel" hidden>
        <h2>Framing Calculator</h2>
        <p>Framing calculator content here...</p>
    </div>
    
    <div id="paint-calc" class="calculator-panel" role="tabpanel" hidden>
        <h2>Paint Calculator</h2>
        <p>Paint calculator content here...</p>
    </div>
    
    <div id="debug-info">
        <h3>Debug Information</h3>
        <button onclick="testTabSystem()">Test Tab System</button>
        <div id="debug-output"></div>
    </div>
    
    <script>
        function testTabSystem() {
            const output = document.getElementById('debug-output');
            output.innerHTML = '<h4>Tab System Debug:</h4>';
            
            // Check if elements exist
            const tablist = document.getElementById('calc-tabs');
            const tabs = document.querySelectorAll('[role="tab"]');
            const panels = document.querySelectorAll('[role="tabpanel"]');
            
            output.innerHTML += `<p>Tablist found: ${!!tablist}</p>`;
            output.innerHTML += `<p>Number of tabs: ${tabs.length}</p>`;
            output.innerHTML += `<p>Number of panels: ${panels.length}</p>`;
            
            // Test tab attributes
            tabs.forEach((tab, index) => {
                const tabId = tab.getAttribute('data-tab');
                const panel = document.getElementById(tabId + '-calc');
                output.innerHTML += `<p>Tab ${index}: data-tab="${tabId}", panel exists: ${!!panel}</p>`;
            });
            
            // Test click handler
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetTab = e.target.getAttribute('data-tab');
                    output.innerHTML += `<p>Clicked tab: ${targetTab}</p>`;
                    
                    // Manual tab switching
                    tabs.forEach(t => t.classList.remove('active'));
                    panels.forEach(p => {
                        p.classList.remove('active');
                        p.style.display = 'none';
                    });
                    
                    e.target.classList.add('active');
                    const targetPanel = document.getElementById(targetTab + '-calc');
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        targetPanel.style.display = 'block';
                    }
                });
            });
            
            output.innerHTML += '<p>Manual click handlers attached</p>';
        }
    </script>
</body>
</html>