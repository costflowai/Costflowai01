<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:;">
    <title>Framing Optimizer - Material & Labor Calc | CostFlowAI</title>
    <meta name="description" content="Optimize framing materials, calculate lumber needs, and estimate labor costs. Professional wood frame construction calculator.">
    <link rel="canonical" href="https://costflowai.com/calculators/framing">
    <link rel="stylesheet" href="../assets/css/calculator.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <!-- Optimized font loading for performance -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"></noscript>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Framing Optimizer - Material & Labor Calc",
      "url": "https://costflowai.com/calculators/framing",
      "operatingSystem": "Web",
      "applicationCategory": "BusinessApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization", 
        "name": "CostFlowAI",
        "url": "https://costflowai.com"
      },
      "description": "Optimize framing materials, calculate lumber needs, and estimate labor costs. Professional wood frame construction calculator."
    }
    </script>
</head>
<body>
    <header>
        <nav class="nav" role="navigation" aria-label="Main navigation">
            <a href="/">Home</a>
            <a href="/calculators/">Calculators</a>
            <a href="/blog/">Blog</a>
            <a href="/#contact">Contact</a>
            <a href="/#contact">üí¨ Feedback</a>
        </nav>
        
        <div class="header">
            <h1>üèóÔ∏è Framing Calculator</h1>
            <p>Optimize stud spacing, calculate headers, and generate lumber takeoffs</p>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="calc-container" id="framing-calc" data-calc="framing">

                <div class="calc-content">
                    <div class="input-section">
                        <div class="card">
                            <h3><i class="fas fa-home"></i> Building Dimensions</h3>
                            <div class="input-grid">
                                <div class="form-group">
                                    <label for="buildingLength">Building Length (ft)</label>
                                    <input type="number" id="buildingLength" data-field="buildingLength" value="40" min="1" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="buildingWidth">Building Width (ft)</label>
                                    <input type="number" id="buildingWidth" data-field="buildingWidth" value="24" min="1" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="wallHeight">Wall Height (ft)</label>
                                    <input type="number" id="wallHeight" data-field="wallHeight" value="9" min="6" max="20" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="roofPitch">Roof Pitch (rise:run)</label>
                                    <select id="roofPitch">
                                        <option value="4/12">4:12</option>
                                        <option value="5/12">5:12</option>
                                        <option value="6/12" selected>6:12</option>
                                        <option value="7/12">7:12</option>
                                        <option value="8/12">8:12</option>
                                        <option value="9/12">9:12</option>
                                        <option value="10/12">10:12</option>
                                        <option value="12/12">12:12</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-cogs"></i> Framing Specifications</h3>
                            <div class="input-grid">
                                <div class="form-group">
                                    <label for="studSize">Stud Size</label>
                                    <select id="studSize">
                                        <option value="2x4">2x4</option>
                                        <option value="2x6" selected>2x6</option>
                                        <option value="2x8">2x8</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="studSpacing">Stud Spacing (inches)</label>
                                    <select id="studSpacing">
                                        <option value="12">12" OC</option>
                                        <option value="16" selected>16" OC</option>
                                        <option value="19.2">19.2" OC</option>
                                        <option value="24">24" OC</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="lumberGrade">Lumber Grade</label>
                                    <select id="lumberGrade">
                                        <option value="stud">Stud Grade</option>
                                        <option value="construction" selected>Construction Grade</option>
                                        <option value="select">Select Structural</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="loadType">Load Type</label>
                                    <select id="loadType">
                                        <option value="residential" selected>Residential</option>
                                        <option value="light-commercial">Light Commercial</option>
                                        <option value="heavy-commercial">Heavy Commercial</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-door-open"></i> Openings</h3>
                            <div class="input-grid">
                                <div class="form-group">
                                    <label for="doors">Number of Doors</label>
                                    <input type="number" id="doors" value="3" min="0" max="20">
                                </div>
                                <div class="form-group">
                                    <label for="avgDoorWidth">Avg Door Width (ft)</label>
                                    <input type="number" id="avgDoorWidth" value="3.5" min="2" max="12" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="windows">Number of Windows</label>
                                    <input type="number" id="windows" value="8" min="0" max="50">
                                </div>
                                <div class="form-group">
                                    <label for="avgWindowWidth">Avg Window Width (ft)</label>
                                    <input type="number" id="avgWindowWidth" value="4" min="1" max="12" step="0.1">
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-dollar-sign"></i> Pricing</h3>
                            <div class="input-grid">
                                <div class="form-group">
                                    <label for="studPrice">Stud Price ($/piece)</label>
                                    <input type="number" id="studPrice" data-field="studPrice" value="6.50" min="1" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label for="platePrice">Plate Price ($/LF)</label>
                                    <input type="number" id="platePrice" data-field="platePrice" value="2.25" min="0.5" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label for="headerPrice">Header Price ($/BF)</label>
                                    <input type="number" id="headerPrice" data-field="headerPrice" value="1.85" min="0.5" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label for="wasteFactor">Waste Factor (%)</label>
                                    <input type="number" id="wasteFactor" value="10" min="5" max="25" step="1">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculate Button -->
                        <div class="calculate-button-section">
                            <button type="button" class="calculate-btn framing" data-action="calculate">
                                <i class="fas fa-hammer"></i>
                                Calculate Framing Estimate
                            </button>
                        </div>
                    </div>

                    <div class="results-section" role="status" aria-live="polite">
                        <div class="card">
                            <h3><i class="fas fa-chart-line"></i> Framing Analysis</h3>
                            <div class="results-grid">
                                <div class="result-item">
                                    <span class="label">Total Wall Length:</span>
                                    <span class="value" id="totalWallLength">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Net Wall Length:</span>
                                    <span class="value" id="netWallLength">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Studs Required:</span>
                                    <span class="value" id="studsRequired" data-out="studsRequired">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Stud Efficiency:</span>
                                    <span class="value" id="studEfficiency">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-tools"></i> Header Calculations</h3>
                            <div class="results-grid">
                                <div class="result-item">
                                    <span class="label">Door Headers Req'd:</span>
                                    <span class="value" id="doorHeaders">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Window Headers Req'd:</span>
                                    <span class="value" id="windowHeaders">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Recommended Header Size:</span>
                                    <span class="value" id="headerSize">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Total Header BF:</span>
                                    <span class="value" id="totalHeaderBF" data-out="totalHeaderBF">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-list"></i> Lumber Takeoff</h3>
                            <div id="lumberTakeoff" class="takeoff-list">
                                <!-- Lumber list will be populated here -->
                            </div>
                        </div>

                        <div class="card">
                            <h3><i class="fas fa-calculator"></i> Cost Summary</h3>
                            <div class="cost-breakdown">
                                <div class="cost-row">
                                    <span>Studs:</span>
                                    <span id="studsCost">$0</span>
                                </div>
                                <div class="cost-row">
                                    <span>Plates:</span>
                                    <span id="platesCost">$0</span>
                                </div>
                                <div class="cost-row">
                                    <span>Headers:</span>
                                    <span id="headersCost">$0</span>
                                </div>
                                <div class="cost-row">
                                    <span>Subtotal:</span>
                                    <span id="subtotal" data-out="subtotal">$0</span>
                                </div>
                                <div class="cost-row">
                                    <span>Waste (<span id="wastePercent">10</span>%):</span>
                                    <span id="wasteCost">$0</span>
                                </div>
                                <div class="cost-row total">
                                    <span>Total Material Cost:</span>
                                    <span id="totalCost" data-out="total">$0</span>
                                </div>
                                <div class="cost-row">
                                    <span>Cost per Sq Ft:</span>
                                    <span id="costPerSqFt">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-actions">
                    <button data-action="save" aria-label="Save framing calculation to browser storage"><i class="fas fa-save" aria-hidden="true"></i> Save</button>
                    <button data-action="export" aria-label="Export framing calculation as CSV file"><i class="fas fa-download" aria-hidden="true"></i> Export CSV</button>
                    <button data-action="share" aria-label="Generate shareable link for framing calculation"><i class="fas fa-share" aria-hidden="true"></i> Share Link</button>
                    <button data-action="print" aria-label="Print framing calculation results"><i class="fas fa-print" aria-hidden="true"></i> Print</button>
                    <button data-action="email" aria-label="Email framing calculation results"><i class="fas fa-envelope" aria-hidden="true"></i> Email</button>
                </div>

                <div class="methodology-section">
                    <div class="card">
                        <h3><i class="fas fa-info-circle"></i> Calculation Methodology</h3>
                        <div class="methodology-content">
                            <h4>Stud Spacing Optimization:</h4>
                            <p>‚Ä¢ Calculates optimal stud count based on spacing and building dimensions</p>
                            <p>‚Ä¢ Considers structural requirements and load-bearing capacity</p>
                            <p>‚Ä¢ Accounts for corner studs and partition intersections</p>
                            
                            <h4>Header Sizing:</h4>
                            <p>‚Ä¢ Headers sized per IRC/IBC span tables</p>
                            <p>‚Ä¢ Considers load type (dead + live loads)</p>
                            <p>‚Ä¢ Factors lumber grade and species strength values</p>
                            
                            <h4>Material Optimization:</h4>
                            <p>‚Ä¢ Minimizes waste through efficient layout</p>
                            <p>‚Ä¢ Standard lumber lengths consideration</p>
                            <p>‚Ä¢ Accounts for typical construction practices</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 CostFlow AI. Professional construction cost analysis.</p>
        </div>
    </footer>

    <script src="/assets/js/calculator-core.js" defer></script>
    <script src="/assets/js/export-utilities.js" defer></script>
    <script src="/assets/js/calculators-hub.js" defer></script>
    <script defer>
        class FramingOptimizer extends ProCalculator {
            constructor() {
                super('Framing Optimizer');
                this.initializeCalculator();
            }

            initializeCalculator() {
                const inputs = [
                    'buildingLength', 'buildingWidth', 'wallHeight', 'roofPitch',
                    'studSize', 'studSpacing', 'lumberGrade', 'loadType',
                    'doors', 'avgDoorWidth', 'windows', 'avgWindowWidth',
                    'studPrice', 'platePrice', 'headerPrice', 'wasteFactor'
                ];

                // Wait for DOM to be fully loaded before adding listeners
                document.addEventListener('DOMContentLoaded', () => {
                    inputs.forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            // Use passive listeners for better performance
                            element.addEventListener('input', () => this.calculate(), { passive: true });
                            element.addEventListener('change', () => this.calculate());
                        }
                    });

                    this.loadFromURL();
                    this.calculate();
                });
            }

            calculate() {
                this.collectInputs();
                this.calculateFraming();
                this.calculateHeaders();
                this.generateTakeoff();
                this.calculateCosts();
                this.displayResults();
                this.updateInputs();
                
                // Move focus to results for accessibility
                const resultsSection = document.querySelector('.results-section');
                if (resultsSection) {
                    resultsSection.setAttribute('tabindex', '-1');
                    resultsSection.focus();
                    setTimeout(() => resultsSection.removeAttribute('tabindex'), 100);
                }
            }

            collectInputs() {
                this.inputs = {
                    buildingLength: parseFloat(document.getElementById('buildingLength').value) || 40,
                    buildingWidth: parseFloat(document.getElementById('buildingWidth').value) || 24,
                    wallHeight: parseFloat(document.getElementById('wallHeight').value) || 9,
                    roofPitch: document.getElementById('roofPitch').value || '6/12',
                    studSize: document.getElementById('studSize').value || '2x6',
                    studSpacing: parseFloat(document.getElementById('studSpacing').value) || 16,
                    lumberGrade: document.getElementById('lumberGrade').value || 'construction',
                    loadType: document.getElementById('loadType').value || 'residential',
                    doors: parseInt(document.getElementById('doors').value) || 3,
                    avgDoorWidth: parseFloat(document.getElementById('avgDoorWidth').value) || 3.5,
                    windows: parseInt(document.getElementById('windows').value) || 8,
                    avgWindowWidth: parseFloat(document.getElementById('avgWindowWidth').value) || 4,
                    studPrice: parseFloat(document.getElementById('studPrice').value) || 6.50,
                    platePrice: parseFloat(document.getElementById('platePrice').value) || 2.25,
                    headerPrice: parseFloat(document.getElementById('headerPrice').value) || 1.85,
                    wasteFactor: parseFloat(document.getElementById('wasteFactor').value) || 10
                };
            }

            calculateFraming() {
                const { buildingLength, buildingWidth, studSpacing } = this.inputs;
                
                // Calculate total perimeter
                this.results.totalWallLength = 2 * (buildingLength + buildingWidth);
                
                // Calculate opening areas
                const doorArea = this.inputs.doors * this.inputs.avgDoorWidth;
                const windowArea = this.inputs.windows * this.inputs.avgWindowWidth;
                this.results.totalOpenings = doorArea + windowArea;
                
                // Net wall length
                this.results.netWallLength = this.results.totalWallLength - this.results.totalOpenings;
                
                // Calculate studs required
                const studSpacingFt = studSpacing / 12;
                const studsPerFoot = 1 / studSpacingFt;
                
                // Base studs plus corners (4) plus extras for openings
                this.results.baseStuds = Math.ceil(this.results.netWallLength * studsPerFoot);
                this.results.cornerStuds = 4;
                this.results.openingStuds = Math.ceil((this.inputs.doors + this.inputs.windows) * 2);
                
                this.results.studsRequired = this.results.baseStuds + this.results.cornerStuds + this.results.openingStuds;
                
                // Calculate efficiency
                this.results.studEfficiency = (this.results.netWallLength / this.results.studsRequired * studsPerFoot * 100).toFixed(1);
            }

            calculateHeaders() {
                const { doors, avgDoorWidth, windows, avgWindowWidth, studSize, loadType } = this.inputs;
                
                // Header requirements
                this.results.doorHeaders = doors;
                this.results.windowHeaders = windows;
                
                // Determine header size based on span and load
                const maxSpan = Math.max(avgDoorWidth, avgWindowWidth);
                this.results.headerSize = this.getHeaderSize(maxSpan, studSize, loadType);
                
                // Calculate board feet
                const headerDepth = this.getHeaderDepth(this.results.headerSize);
                const avgHeaderLength = (doors * avgDoorWidth + windows * avgWindowWidth) / (doors + windows);
                const totalHeaderLength = doors * avgDoorWidth + windows * avgWindowWidth;
                
                this.results.totalHeaderBF = totalHeaderLength * headerDepth;
            }

            getHeaderSize(span, studSize, loadType) {
                // Simplified header sizing - in practice would use span tables
                const loadFactors = {
                    'residential': 1.0,
                    'light-commercial': 1.2,
                    'heavy-commercial': 1.5
                };
                
                const adjustedSpan = span * loadFactors[loadType];
                
                if (adjustedSpan <= 3) return '2x6';
                else if (adjustedSpan <= 4) return '2x8';
                else if (adjustedSpan <= 6) return '2x10';
                else if (adjustedSpan <= 8) return '2x12';
                else return 'LVL Beam';
            }

            getHeaderDepth(headerSize) {
                const depths = {
                    '2x6': 5.5 / 12,
                    '2x8': 7.25 / 12,
                    '2x10': 9.25 / 12,
                    '2x12': 11.25 / 12,
                    'LVL Beam': 11.25 / 12
                };
                return depths[headerSize] || 5.5 / 12;
            }

            generateTakeoff() {
                const { buildingLength, buildingWidth, wallHeight, studSize } = this.inputs;
                
                this.results.takeoff = {
                    studs: {
                        size: studSize,
                        length: `${wallHeight}'`,
                        quantity: this.results.studsRequired,
                        unit: 'ea'
                    },
                    topPlate: {
                        size: studSize,
                        length: "Various",
                        quantity: Math.ceil(this.results.totalWallLength * 2 / 8) * 8, // Double top plate in 8' lengths
                        unit: 'LF'
                    },
                    bottomPlate: {
                        size: studSize,
                        length: "Various", 
                        quantity: Math.ceil(this.results.totalWallLength / 8) * 8, // Single bottom plate
                        unit: 'LF'
                    },
                    headers: {
                        size: this.results.headerSize,
                        length: "Various",
                        quantity: this.results.totalHeaderBF.toFixed(1),
                        unit: 'BF'
                    }
                };
            }

            calculateCosts() {
                const { studPrice, platePrice, headerPrice, wasteFactor } = this.inputs;
                
                // Calculate material costs
                this.results.studsCost = this.results.studsRequired * studPrice;
                this.results.platesCost = (this.results.takeoff.topPlate.quantity + this.results.takeoff.bottomPlate.quantity) * platePrice;
                this.results.headersCost = this.results.totalHeaderBF * headerPrice;
                
                // Subtotal
                this.results.subtotal = this.results.studsCost + this.results.platesCost + this.results.headersCost;
                
                // Waste
                this.results.wasteCost = this.results.subtotal * (wasteFactor / 100);
                
                // Total
                this.results.totalCost = this.results.subtotal + this.results.wasteCost;
                
                // Cost per square foot
                const totalSqFt = this.inputs.buildingLength * this.inputs.buildingWidth;
                this.results.costPerSqFt = this.results.totalCost / totalSqFt;
            }

            displayResults() {
                // Framing Analysis
                document.getElementById('totalWallLength').textContent = `${this.results.totalWallLength.toFixed(1)} ft`;
                document.getElementById('netWallLength').textContent = `${this.results.netWallLength.toFixed(1)} ft`;
                document.getElementById('studsRequired').textContent = `${this.results.studsRequired} ea`;
                document.getElementById('studEfficiency').textContent = `${this.results.studEfficiency}%`;
                
                // Headers
                document.getElementById('doorHeaders').textContent = `${this.results.doorHeaders} ea`;
                document.getElementById('windowHeaders').textContent = `${this.results.windowHeaders} ea`;
                document.getElementById('headerSize').textContent = this.results.headerSize;
                document.getElementById('totalHeaderBF').textContent = `${this.results.totalHeaderBF.toFixed(1)} BF`;
                
                // Lumber Takeoff
                this.displayTakeoff();
                
                // Costs
                document.getElementById('studsCost').textContent = `$${this.results.studsCost.toFixed(2)}`;
                document.getElementById('platesCost').textContent = `$${this.results.platesCost.toFixed(2)}`;
                document.getElementById('headersCost').textContent = `$${this.results.headersCost.toFixed(2)}`;
                document.getElementById('subtotal').textContent = `$${this.results.subtotal.toFixed(2)}`;
                document.getElementById('wastePercent').textContent = this.inputs.wasteFactor;
                document.getElementById('wasteCost').textContent = `$${this.results.wasteCost.toFixed(2)}`;
                document.getElementById('totalCost').textContent = `$${this.results.totalCost.toFixed(2)}`;
                document.getElementById('costPerSqFt').textContent = `$${this.results.costPerSqFt.toFixed(2)}`;
            }

            displayTakeoff() {
                const takeoffDiv = document.getElementById('lumberTakeoff');
                const { takeoff } = this.results;
                
                takeoffDiv.innerHTML = `
                    <div class="takeoff-item">
                        <div class="item-description">
                            <strong>${takeoff.studs.size} x ${takeoff.studs.length} Studs</strong>
                            <span>Quantity: ${takeoff.studs.quantity} ${takeoff.studs.unit}</span>
                        </div>
                        <div class="item-cost">$${(takeoff.studs.quantity * this.inputs.studPrice).toFixed(2)}</div>
                    </div>
                    <div class="takeoff-item">
                        <div class="item-description">
                            <strong>${takeoff.topPlate.size} Top Plates (Double)</strong>
                            <span>Quantity: ${takeoff.topPlate.quantity} ${takeoff.topPlate.unit}</span>
                        </div>
                        <div class="item-cost">$${(takeoff.topPlate.quantity * this.inputs.platePrice).toFixed(2)}</div>
                    </div>
                    <div class="takeoff-item">
                        <div class="item-description">
                            <strong>${takeoff.bottomPlate.size} Bottom Plates</strong>
                            <span>Quantity: ${takeoff.bottomPlate.quantity} ${takeoff.bottomPlate.unit}</span>
                        </div>
                        <div class="item-cost">$${(takeoff.bottomPlate.quantity * this.inputs.platePrice).toFixed(2)}</div>
                    </div>
                    <div class="takeoff-item">
                        <div class="item-description">
                            <strong>${takeoff.headers.size} Headers</strong>
                            <span>Quantity: ${takeoff.headers.quantity} ${takeoff.headers.unit}</span>
                        </div>
                        <div class="item-cost">$${(parseFloat(takeoff.headers.quantity) * this.inputs.headerPrice).toFixed(2)}</div>
                    </div>
                `;
            }

            printResults() {
                const printWindow = window.open('', '_blank');
                const printContent = `
                    <html>
                    <head>
                        <title>Framing Optimizer Results</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .header { text-align: center; margin-bottom: 30px; }
                            .section { margin-bottom: 20px; }
                            .section h3 { color: #2c5282; border-bottom: 2px solid #2c5282; padding-bottom: 5px; }
                            .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
                            .takeoff-table { width: 100%; border-collapse: collapse; }
                            .takeoff-table th, .takeoff-table td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
                            .cost-summary { background: #f7fafc; padding: 15px; border-radius: 5px; }
                            .total-row { font-weight: bold; border-top: 2px solid #2c5282; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h2>Framing Optimizer Results</h2>
                            <p>Building: ${this.inputs.buildingLength}' x ${this.inputs.buildingWidth}' x ${this.inputs.wallHeight}'</p>
                            <p>Generated: ${new Date().toLocaleDateString()}</p>
                        </div>
                        
                        <div class="section">
                            <h3>Framing Analysis</h3>
                            <div class="grid">
                                <div>Total Wall Length: ${this.results.totalWallLength.toFixed(1)} ft</div>
                                <div>Net Wall Length: ${this.results.netWallLength.toFixed(1)} ft</div>
                                <div>Studs Required: ${this.results.studsRequired} ea</div>
                                <div>Stud Efficiency: ${this.results.studEfficiency}%</div>
                            </div>
                        </div>
                        
                        <div class="section">
                            <h3>Lumber Takeoff</h3>
                            <table class="takeoff-table">
                                <tr><th>Item</th><th>Quantity</th><th>Unit</th><th>Cost</th></tr>
                                <tr><td>${this.results.takeoff.studs.size} x ${this.results.takeoff.studs.length} Studs</td><td>${this.results.takeoff.studs.quantity}</td><td>${this.results.takeoff.studs.unit}</td><td>$${(this.results.takeoff.studs.quantity * this.inputs.studPrice).toFixed(2)}</td></tr>
                                <tr><td>${this.results.takeoff.topPlate.size} Top Plates</td><td>${this.results.takeoff.topPlate.quantity}</td><td>${this.results.takeoff.topPlate.unit}</td><td>$${(this.results.takeoff.topPlate.quantity * this.inputs.platePrice).toFixed(2)}</td></tr>
                                <tr><td>${this.results.takeoff.bottomPlate.size} Bottom Plates</td><td>${this.results.takeoff.bottomPlate.quantity}</td><td>${this.results.takeoff.bottomPlate.unit}</td><td>$${(this.results.takeoff.bottomPlate.quantity * this.inputs.platePrice).toFixed(2)}</td></tr>
                                <tr><td>${this.results.takeoff.headers.size} Headers</td><td>${this.results.takeoff.headers.quantity}</td><td>${this.results.takeoff.headers.unit}</td><td>$${(parseFloat(this.results.takeoff.headers.quantity) * this.inputs.headerPrice).toFixed(2)}</td></tr>
                            </table>
                        </div>
                        
                        <div class="section">
                            <h3>Cost Summary</h3>
                            <div class="cost-summary">
                                <div>Subtotal: $${this.results.subtotal.toFixed(2)}</div>
                                <div>Waste (${this.inputs.wasteFactor}%): $${this.results.wasteCost.toFixed(2)}</div>
                                <div class="total-row">Total Material Cost: $${this.results.totalCost.toFixed(2)}</div>
                                <div>Cost per Sq Ft: $${this.results.costPerSqFt.toFixed(2)}</div>
                            </div>
                        </div>
                    <script defer>
    document.getElementById('btn-print')?.addEventListener('click', () => window.print());
</script>
</body>
                    </html>
                `;
                
                printWindow.document.write(printContent);
                printWindow.document.close();
                printWindow.print();
            }
        }

        // Initialize calculator after DOM is ready
        let calculator;
        document.addEventListener('DOMContentLoaded', () => {
            calculator = new FramingOptimizer();
        });
    </script>

<script>
// Lazy load methodology sections
document.addEventListener('DOMContentLoaded', function() {
    const lazyElements = document.querySelectorAll('.methodology-section, .disclaimer-section');
    
    if ('IntersectionObserver' in window) {
        const lazyObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('loaded');
                    lazyObserver.unobserve(entry.target);
                }
            });
        }, { rootMargin: '100px' });
        
        lazyElements.forEach(el => {
            el.style.opacity = '0';
            el.style.transition = 'opacity 0.3s';
            lazyObserver.observe(el);
        });
        
        // Add loaded class handler
        const style = document.createElement('style');
        style.textContent = '.methodology-section.loaded, .disclaimer-section.loaded { opacity: 1 !important; }';
        document.head.appendChild(style);
    }
});
</script>
<!-- Print functionality handled in main calculator initialization -->
</body>
</html>